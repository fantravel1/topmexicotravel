<!DOCTYPE html>
<html lang="{{lang}}" dir="ltr">
<head>
{{> head}}

<!-- Itinerary Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TouristTrip",
  "name": "{{title}}",
  "description": "{{meta_description}}",
  "touristType": {{tourist_types_json}},
  "itinerary": {
    "@type": "ItemList",
    "numberOfItems": {{day_count}},
    "itemListElement": [
      {{#each days}}
      {
        "@type": "ListItem",
        "position": {{this.day}},
        "name": "Day {{this.day}}: {{this.title}}",
        "description": "{{this.description}}"
      }{{#unless @last}},{{/unless}}
      {{/each}}
    ]
  }
}
</script>
</head>
<body>
<a href="#main-content" class="skip-link">Skip to main content</a>

{{> header}}

<main id="main-content" role="main">
  <!-- Hero Section -->
  <header class="hero" style="min-height: 60vh;">
    <img
      src="{{hero_image}}"
      alt="{{hero_alt}}"
      width="1920"
      height="1080"
      fetchpriority="high"
      decoding="async"
      class="hero-image">
    <div class="hero-overlay"></div>
    <div class="hero-content" style="max-width: 800px;">
      <div class="badge badge-primary" style="margin-bottom: var(--spacing-sm);">{{duration}}</div>
      <h1 class="hero-title">{{title}}</h1>
      <p class="hero-tagline">{{subtitle}}</p>
    </div>
  </header>

  <!-- Introduction -->
  <section class="section" style="padding-top: var(--spacing-xl);">
    <div class="section-container" style="max-width: 800px;">
      <p style="font-size: 1.25rem; line-height: 1.8; color: var(--color-text-light);">{{introduction}}</p>

      <!-- Trip Highlights -->
      <div style="margin-top: var(--spacing-xl); background: var(--color-bg-alt); border-radius: var(--radius-md); padding: var(--spacing-lg);">
        <h2 style="font-size: 1.25rem; margin-bottom: var(--spacing-md);">Trip Highlights</h2>
        <ul style="list-style: none; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-sm);">
          {{#each highlights}}
          <li style="display: flex; align-items: center; gap: var(--spacing-sm);">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
            {{this}}
          </li>
          {{/each}}
        </ul>
      </div>

      <!-- Quick Facts -->
      <div style="margin-top: var(--spacing-lg); display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
        <div style="padding: var(--spacing-md); border: 1px solid var(--color-border); border-radius: var(--radius-sm);">
          <div style="font-weight: 600; color: var(--color-primary);">Duration</div>
          <div>{{duration}}</div>
        </div>
        <div style="padding: var(--spacing-md); border: 1px solid var(--color-border); border-radius: var(--radius-sm);">
          <div style="font-weight: 600; color: var(--color-primary);">Best Time</div>
          <div>{{best_time}}</div>
        </div>
        <div style="padding: var(--spacing-md); border: 1px solid var(--color-border); border-radius: var(--radius-sm);">
          <div style="font-weight: 600; color: var(--color-primary);">Budget (Mid-Range)</div>
          <div>{{mid_range_budget}}</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Day by Day Itinerary -->
  <section class="section" aria-labelledby="itinerary-heading">
    <div class="section-container" style="max-width: 900px;">
      <h2 id="itinerary-heading" class="section-title">Day-by-Day Itinerary</h2>

      <div style="display: flex; flex-direction: column; gap: var(--spacing-xl);">
        {{#each days}}
        <article style="display: grid; grid-template-columns: 1fr; gap: var(--spacing-lg); padding-bottom: var(--spacing-xl); border-bottom: 1px solid var(--color-border);" id="day-{{this.day}}">
          <div>
            <div style="display: flex; align-items: center; gap: var(--spacing-md); margin-bottom: var(--spacing-md);">
              <div style="background: var(--color-primary); color: white; width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">{{this.day}}</div>
              <div>
                <h3 style="font-size: 1.5rem; margin: 0;">{{this.title}}</h3>
                <div style="color: var(--color-text-light);">{{this.location}}</div>
              </div>
            </div>

            <img
              src="{{this.image}}"
              alt="{{this.title}}"
              width="800"
              height="400"
              loading="lazy"
              decoding="async"
              style="width: 100%; height: 300px; object-fit: cover; border-radius: var(--radius-md); margin-bottom: var(--spacing-md);">

            <p style="margin-bottom: var(--spacing-md);">{{this.description}}</p>

            <div style="background: var(--color-bg-alt); padding: var(--spacing-md); border-radius: var(--radius-sm); margin-bottom: var(--spacing-md);">
              <strong>Today's Activities:</strong>
              <ul style="margin-top: var(--spacing-sm);">
                {{#each this.activities}}
                <li>{{this}}</li>
                {{/each}}
              </ul>
            </div>

            {{#if this.tips}}
            <div style="background: #fef3c7; padding: var(--spacing-md); border-radius: var(--radius-sm); border-left: 4px solid var(--color-accent);">
              <strong>Pro Tips:</strong>
              <ul style="margin-top: var(--spacing-sm);">
                {{#each this.tips}}
                <li>{{this}}</li>
                {{/each}}
              </ul>
            </div>
            {{/if}}
          </div>
        </article>
        {{/each}}
      </div>
    </div>
  </section>

  <!-- Practical Information -->
  <section class="section" aria-labelledby="practical-heading" style="background: var(--color-bg-alt);">
    <div class="section-container" style="max-width: 800px;">
      <h2 id="practical-heading" class="section-title">Practical Information</h2>

      <div style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
        {{#if getting_there}}
        <div>
          <h3 style="font-size: 1.25rem; margin-bottom: var(--spacing-sm);">Getting There</h3>
          <p>{{getting_there}}</p>
        </div>
        {{/if}}

        {{#if getting_around}}
        <div>
          <h3 style="font-size: 1.25rem; margin-bottom: var(--spacing-sm);">Getting Around</h3>
          <p>{{getting_around}}</p>
        </div>
        {{/if}}
      </div>
    </div>
  </section>

  <!-- FAQs -->
  {{#if faqs}}
  <section class="section" aria-labelledby="faq-heading">
    <div class="section-container" style="max-width: 800px;">
      <h2 id="faq-heading" class="section-title">Frequently Asked Questions</h2>
      <div itemscope itemtype="https://schema.org/FAQPage">
        {{#each faqs}}
        <details style="margin-bottom: var(--spacing-md); border: 1px solid var(--color-border); border-radius: var(--radius-sm);" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
          <summary style="padding: var(--spacing-md); cursor: pointer; font-weight: 600;" itemprop="name">{{this.question}}</summary>
          <div style="padding: 0 var(--spacing-md) var(--spacing-md);" itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
            <p itemprop="text">{{this.answer}}</p>
          </div>
        </details>
        {{/each}}
      </div>
    </div>
  </section>
  {{/if}}

  <!-- Related Itineraries -->
  <section class="section" style="background: var(--color-bg-alt);">
    <div class="section-container">
      <h2 class="section-title">More Mexico Itineraries</h2>
      <div style="text-align: center;">
        <a href="/{{lang}}/itineraries/" class="cta-link">View All Itineraries â†’</a>
      </div>
    </div>
  </section>
</main>

{{> footer}}

<script defer>
document.addEventListener('DOMContentLoaded', function() {
  const menuToggle = document.querySelector('.menu-toggle');
  const mobileNav = document.querySelector('.mobile-nav');

  if (menuToggle && mobileNav) {
    menuToggle.addEventListener('click', function() {
      const isOpen = mobileNav.classList.toggle('is-open');
      this.setAttribute('aria-expanded', isOpen);
    });
  }
});
</script>
</body>
</html>
